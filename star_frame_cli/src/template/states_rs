use crate::{name_pascalcase}Error;
use star_frame::prelude::*;

#[derive(Debug, GetSeeds, Clone)]
#[get_seeds(seed_const = b"COUNTER")]
pub struct CounterAccountSeeds {
    pub authority: Pubkey,
}

#[zero_copy(pod)]
#[derive(Default, Debug, Eq, PartialEq, ProgramAccount)]
#[program_account(seeds = CounterAccountSeeds)]
pub struct CounterAccount {
    pub authority: Pubkey,
    pub count: u64,
}

pub struct Authority(pub Pubkey);

impl AccountValidate<Authority> for CounterAccount {
    fn validate_account(self_ref: &Self::Ptr, arg: Authority) -> Result<()> {
        ensure_eq!(
            &self_ref.authority,
            &arg.0,
            {name_pascalcase}Error::IncorrectAuthority
        );
        Ok(())
    }
}
