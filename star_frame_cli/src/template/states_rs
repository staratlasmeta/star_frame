use star_frame::prelude::*;
use crate::{name_pascalcase}Error;

#[derive(Debug, GetSeeds, Clone)]
#[get_seeds(seed_const = b"COUNTER")]
pub struct CounterAccountSeeds {
    pub authority: Address,
}

#[zero_copy(pod)]
#[derive(Default, Debug, Eq, PartialEq, ProgramAccount)]
#[program_account(seeds = CounterAccountSeeds)]
pub struct CounterAccount {
    pub authority: Address,
    pub count: u64,
}

pub struct Authority(pub Address);

impl AccountValidate<Authority> for CounterAccount {
    fn validate_account(self_ref: &Self::Ptr, arg: Authority) -> Result<()> {
        ensure_eq!(&self_ref.authority, &arg.0, {name_pascalcase}Error::IncorrectAuthority);
        Ok(())
    }
}
